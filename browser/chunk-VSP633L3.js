import{a as me}from"./chunk-DLEJWGRM.js";import{$ as y,A as b,Aa as ae,I as K,K as J,Q,R as M,S as C,T as H,V as S,W,X,Y as x,Z as p,_,aa as w,ba as I,ca as F,d as g,da as N,ea as P,f as h,fa as Y,ia as R,j as m,ja as k,k as d,l as u,la as Z,m as v,ma as O,n as U,na as $,oa as E,p as l,pa as ee,q as i,qa as B,r as e,ra as L,s,sa as te,ta as A,ua as ie,va as j,w as c,wa as oe,xa as q,ya as re,z as r,za as ne}from"./chunk-WKEIMEWF.js";function be(n,a){n&1&&s(0,"mat-progress-spinner",13)}function Me(n,a){n&1&&(i(0,"span"),r(1,"Login"),e())}function Ce(n,a){n&1&&(i(0,"mat-error"),r(1," Per favore, completa tutti i campi richiesti. "),e())}var D=class n{constructor(a,o,t,f){this.fb=a;this.authService=o;this.router=t;this.snackBar=f}loginForm;loading=!1;hidePassword=!0;ngOnInit(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required]]})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loading=!0;let a=this.loginForm.getRawValue();this.authService.login(a).pipe(g(()=>this.loading=!1)).subscribe({next:()=>{this.router.navigate(["/home"])},error:o=>{let t=o.error?.message||"Credenziali non valide. Riprova.";this.snackBar.open(t,"Chiudi",{duration:5e3,panelClass:["error-snackbar"]})}})}static \u0275fac=function(o){return new(o||n)(d(P),d(S),d(M),d(O))};static \u0275cmp=u({type:n,selectors:[["app-login"]],standalone:!1,decls:25,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary",1,"full-width",3,"disabled"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[4,"ngIf"],[1,"auth-footer"],["routerLink","/auth/register"],["mode","indeterminate","diameter","20","color","accent"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"mat-card",1)(2,"h2",2),r(3,"Login"),e(),i(4,"form",3),c("ngSubmit",function(){return t.onSubmit()}),i(5,"mat-form-field",4)(6,"mat-label"),r(7,"Email"),e(),s(8,"input",5),e(),i(9,"mat-form-field",4)(10,"mat-label"),r(11,"Password"),e(),s(12,"input",6),i(13,"button",7),c("click",function(){return t.hidePassword=!t.hidePassword}),i(14,"mat-icon"),r(15),e()()(),i(16,"button",8),U(17,be,1,0,"mat-progress-spinner",9)(18,Me,2,0,"span",10),e(),U(19,Ce,2,0,"mat-error",10),e(),i(20,"div",11)(21,"span"),r(22,"Non hai un account?"),e(),i(23,"a",12),r(24,"Registrati"),e()()()()),o&2&&(m(4),l("formGroup",t.loginForm),m(8),l("type",t.hidePassword?"password":"text"),m(3),b(t.hidePassword?"visibility_off":"visibility"),m(),l("disabled",t.loginForm.invalid||t.loading),m(),l("ngIf",t.loading),m(),l("ngIf",!t.loading),m(),l("ngIf",t.loginForm.invalid&&t.loginForm.touched))},dependencies:[K,C,k,R,A,L,E,ee,B,j,q,W,w,x,_,y,N,I,F],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 128px);padding:1rem;background:#f5f5f5}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem;border-radius:12px;box-shadow:0 6px 12px #0000001a}.auth-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.auth-footer[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:14px}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:4px;color:#3f51b5;text-decoration:none;font-weight:500}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--primary-bg);color:var(--primary-text)}.register-card[_ngcontent-%COMP%], .login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background-color:var(--card-bg);box-shadow:0 4px 12px #00000026}mat-form-field[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]{color:var(--link-color)}"]})};var T=class n{constructor(a,o,t,f){this.fb=a;this.authService=o;this.router=t;this.snackBar=f}registerForm;loading=!1;hidePassword=!0;ngOnInit(){this.registerForm=this.fb.group({nome:["",[p.required]],cognome:["",[p.required]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(8)]],ruolo:["user"]})}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.loading=!0;let a=this.registerForm.getRawValue();this.authService.register(a).pipe(g(()=>this.loading=!1)).subscribe({next:()=>{this.snackBar.open("Registrazione avvenuta con successo!","OK",{duration:3e3}),this.router.navigate(["/home"])},error:o=>{let t=o.error?.message||"Registrazione fallita. Riprova.";this.snackBar.open(t,"Chiudi",{duration:5e3,panelClass:["error-snackbar"]})}})}static \u0275fac=function(o){return new(o||n)(d(P),d(S),d(M),d(O))};static \u0275cmp=u({type:n,selectors:[["app-register"]],standalone:!1,decls:39,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","nome","required",""],["matInput","","formControlName","cognome","required",""],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["formControlName","ruolo","required",""],["value","user"],["value","admin"],["mat-raised-button","","color","primary",1,"full-width",3,"disabled"],[1,"auth-footer"],["routerLink","/auth/login"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"mat-card",1)(2,"h2",2),r(3,"Registrazione"),e(),i(4,"form",3),c("ngSubmit",function(){return t.onSubmit()}),i(5,"mat-form-field",4)(6,"mat-label"),r(7,"Nome"),e(),s(8,"input",5),e(),i(9,"mat-form-field",4)(10,"mat-label"),r(11,"Cognome"),e(),s(12,"input",6),e(),i(13,"mat-form-field",4)(14,"mat-label"),r(15,"Email"),e(),s(16,"input",7),e(),i(17,"mat-form-field",4)(18,"mat-label"),r(19,"Password"),e(),s(20,"input",8),i(21,"button",9),c("click",function(){return t.hidePassword=!t.hidePassword}),i(22,"mat-icon"),r(23),e()()(),i(24,"mat-form-field",4)(25,"mat-label"),r(26,"Ruolo"),e(),i(27,"mat-select",10)(28,"mat-option",11),r(29,"User"),e(),i(30,"mat-option",12),r(31,"Admin"),e()()(),i(32,"button",13),r(33," Registrati "),e()(),i(34,"div",14)(35,"span"),r(36,"Hai gi\xE0 un account?"),e(),i(37,"a",15),r(38,"Accedi"),e()()()()),o&2&&(m(4),l("formGroup",t.registerForm),m(16),l("type",t.hidePassword?"password":"text"),m(3),b(t.hidePassword?"visibility_off":"visibility"),m(9),l("disabled",t.registerForm.invalid))},dependencies:[C,k,R,A,L,E,B,j,q,ne,re,w,x,_,y,N,I,F],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 128px);padding:1rem;background:#f5f5f5}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem;border-radius:12px;box-shadow:0 6px 12px #0000001a}.auth-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.auth-footer[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:14px}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:4px;color:#3f51b5;text-decoration:none;font-weight:500}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--primary-bg);color:var(--primary-text)}.register-card[_ngcontent-%COMP%], .login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background-color:var(--card-bg);box-shadow:0 4px 12px #00000026}mat-form-field[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]{color:var(--link-color)}"]})};var V=class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=u({type:n,selectors:[["app-auth"]],standalone:!1,decls:1,vars:0,template:function(o,t){o&1&&s(0,"router-outlet")},dependencies:[Q],encapsulation:2})};var Se=[{path:"",component:V,children:[{path:"login",component:D},{path:"register",component:T}]}],z=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=v({type:n});static \u0275inj=h({imports:[H.forChild(Se),H]})};var pe=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=v({type:n});static \u0275inj=h({imports:[J,z,me,Y,te,ie,ae,Z,oe,$,X]})};export{pe as AuthModule};
